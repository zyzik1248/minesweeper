(this.webpackJsonpsaper=this.webpackJsonpsaper||[]).push([[5],{58:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return u}));var r=n(56),i=n.n(r),a=n(57),c=n(63),s=function(){if(!c.a.apps.length){c.a.initializeApp({apiKey:"AIzaSyARXNmjw3dtkJ05clEifNoCVpXcWxmPL-Q",authDomain:"minesweeper-d2be7.firebaseapp.com",projectId:"minesweeper-d2be7",databaseURL:"https://minesweeper-d2be7-default-rtdb.europe-west1.firebasedatabase.app/",storageBucket:"minesweeper-d2be7.appspot.com"})}},o=function(e){s(),c.a.database().ref("winners").push(e)},u=function(){var e=Object(a.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(),e.abrupt("return",new Promise(function(){var e=Object(a.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.prev=1,e.next=4,c.a.database().ref("winners").once("value");case 4:return a=e.sent,Object.values(a.val()).forEach((function(e){r.push(e)})),e.abrupt("return",t(r));case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",n(null));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},65:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));var r=function(t,n,r){var a=[];e.width=t,e.height=n;for(var s=0;s<n;s++){a[s]=[];for(var o=0;o<t;o++){a[s][o]={value:0,isOpen:!1,isFlag:!1,isQuestionMark:!1}}}for(var u=0;u<r;u++){var l=i(a);a[l.x][l.y].value=-1}for(var f=0;f<n;f++)for(var b=0;b<t;b++)if(0===a[f][b].value){var d=0;c(a,f-1,b-1)&&d++,c(a,f-1,b)&&d++,c(a,f-1,b+1)&&d++,c(a,f,b-1)&&d++,c(a,f,b+1)&&d++,c(a,f+1,b-1)&&d++,c(a,f+1,b)&&d++,c(a,f+1,b+1)&&d++,a[f][b].value=d}return a},i=function(t){for(var n={x:-1,y:-1},r=0;r<5;r++)if(-1!==t[(n=a()).x][n.y].value)return{x:n.x,y:n.y};for(var i=n.y;i<e.width;i++)if(-1!==t[n.x][i].value)return{x:n.x,y:i};for(var c=n.x+1;c<e.height;c++)for(var s=0;s<e.width;s++)if(-1!==t[c][s].value)return{x:c,y:s};for(var o=n.y;o<=0;o--)if(-1!==t[n.x][o].value)return{x:n.x,y:o};for(var u=n.x+1;u<=0;u--)for(var l=n.y;l<=0;l--)if(-1!==t[u][l].value)return{x:u,y:l};return n},a=function(){return{x:Math.floor(Math.random()*e.height),y:Math.floor(Math.random()*e.width)}},c=function(t,n,r){return-1!==n&&n!==e.height&&-1!==r&&r!==e.width&&-1===t[n][r].value}}).call(this,n(30))},71:function(e,t,n){"use strict";n.r(t);var r=n(13),i=n(2),a=n(1),c=n(18),s=n(3),o=n(4),u=n(60),l=n(20),f=n(64),b=n(8),d=function(e,t){switch(e){case b.b.blue:switch(t){case"bomb":return Object(i.jsx)(l.a,{style:{color:"#DAAE00"}});case"flag":return Object(i.jsx)(u.a,{style:{color:"#DAAE00"}});case"question":return Object(i.jsx)(f.a,{style:{color:"#DAAE00"}});case"active_flag":return Object(i.jsx)(u.a,{style:{color:"#bb0000"}});case"active_bomb":return Object(i.jsx)(l.a,{style:{color:"#bb0000"}});default:return Object(i.jsx)("div",{style:{color:"green",fontWeight:"bold"},children:t})}case b.b.green:switch(t){case"bomb":return Object(i.jsx)(u.b,{style:{color:"#012601"}});case"flag":return Object(i.jsx)(u.a,{style:{color:"#012601"}});case"question":return Object(i.jsx)(f.a,{style:{color:"#012601"}});case"active_flag":return Object(i.jsx)(u.a,{style:{color:"#bb0000"}});case"active_bomb":return Object(i.jsx)(u.b,{style:{color:"#bb0000"}});default:return Object(i.jsx)("div",{style:{color:"#1DB6B6",fontWeight:"bold"},children:t})}case b.b.pink:switch(t){case"bomb":return Object(i.jsx)(l.b,{style:{color:"#cc0066",fontSize:30}});case"flag":return Object(i.jsx)(u.a,{style:{color:"#cc0066"}});case"question":return Object(i.jsx)(f.a,{style:{color:"#cc0066"}});case"active_flag":return Object(i.jsx)(u.a,{style:{color:"#bb0000"}});case"active_bomb":return Object(i.jsx)(l.b,{style:{color:"#bb0000",fontSize:30}});default:return Object(i.jsx)("div",{style:{color:"#3F0041",fontWeight:"bold"},children:t})}}};function h(){var e=Object(s.a)(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5em;\n"]);return h=function(){return e},e}function j(){var e=Object(s.a)(["",""]);return j=function(){return e},e}function p(){var e=Object(s.a)(["\n  position: relative;\n  margin: 1px;\n  border-radius: 15%;\n  background-color: ",";\n  -webkit-touch-callout: none;\n    -webkit-user-select: none;\n     -khtml-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n"]);return p=function(){return e},e}var v=o.b.div(p(),(function(e){return e.isOpen?"gainsboro":Object(o.a)(j(),function(e){switch(e){case b.b.blue:return"#3e67ce";case b.b.green:return"#1C951C";case b.b.pink:return"#FF9999"}}(e.colorTheme))})),g=o.b.p(h()),x=function(e){var t=e.value,n=e.x,r=e.y,a=e.isOpen,c=e.isFlag,s=e.isQuestionMark,o=e.isLose,u=e.click,l=e.marking,f=e.theme;return Object(i.jsx)(v,{isOpen:a,onClick:function(){o||u(n,r)},onContextMenu:function(){o||l(n,r)},colorTheme:f,children:Object(i.jsxs)(g,{children:[a&&0!==t&&!c&&-1!==t&&d(f,t+""),a&&!c&&-1===t&&d(f,"active_bomb"),o&&!a&&!c&&-1===t&&d(f,"bomb"),c&&!(o&&-1!==t)&&d(f,"flag"),o&&c&&-1!==t&&d(f,"active_flag"),s&&d(f,"question")]})})},O=function(e,t){return e.isOpen===t.isOpen&&e.isFlag===t.isFlag&&e.isQuestionMark===t.isQuestionMark&&e.isLose===t.isLose&&e.value===t.value&&e.x===t.x&&e.y===t.y||(!t.isLose||!t.isFlag||-1===t.value)&&!(!t.isLose||-1===t.value)},m=Object(a.memo)(x,O);function w(){var e=Object(s.a)(["\n  height: 85vh;\n  width: 95vw;\n  display: flex;\n  margin: 25px auto;\n  justify-content: center;\n  align-items: center;\n  overflow-y: auto;\n  overflow-x: auto;\n  ::-webkit-scrollbar { \n    display: none;\n  }\n"]);return w=function(){return e},e}function y(){var e=Object(s.a)(["\n  padding: 0;\n  display: grid;\n  ","\n  height: 100%;\n  grid-gap: 0px;\n  letter-spacing: 0px;\n  word-spacing: 0px;\n"]);return y=function(){return e},e}var k=o.b.div(y(),(function(e){return e.windowHeight*(85/e.height)/100*e.width<e.windowWidth?"grid-template-rows: repeat(".concat(e.height,", ").concat(e.windowHeight*(85/e.height)/100<30?"30px":"1fr",");\n    grid-template-columns: repeat(").concat(e.width,", ").concat(e.windowHeight*(85/e.height)/100<30?"30px":"".concat(85/e.height,"vh"),");\n    "):"grid-template-columns: repeat(".concat(e.width,", ").concat(e.windowWidth*(95/e.width)/100<30?"30px":"1fr",");\n    grid-template-rows: repeat(").concat(e.height,", ").concat(e.windowWidth*(95/e.width)/100<30?"30px":"".concat(95/e.width,"vw"),");\n    width: 100%;")})),F=o.b.div(w()),S=n(65),M=function(e){var t=e.height,n=e.width,c=e.mines,s=e.setFlags,o=e.setIsLose,u=e.isLose,l=e.setIsWin,f=e.theme,b=Object(a.useState)({fields:[]}),d=Object(r.a)(b,2),h=d[0],j=d[1],p=Object(a.useState)(0),v=Object(r.a)(p,2),g=v[0],x=v[1],O=Object(a.useState)(0),w=Object(r.a)(O,2),y=w[0],M=w[1];Object(a.useEffect)((function(){j({fields:Object(S.a)(n,t,c)}),L(),window.addEventListener("resize",L)}),[n,t,c]);var L=function(){x(window.innerWidth),M(window.innerHeight)},W=function(e,r){var i=h.fields.slice();i[e][r].isFlag||(i[e][r].isOpen?E(e,r,i)&&(z(e-1,r+1,i),z(e-1,r,i),z(e-1,r-1,i),z(e,r+1,i),z(e,r-1,i),z(e+1,r+1,i),z(e+1,r,i),z(e+1,r-1,i)):z(e,r,i),j({fields:i}),function(){for(var e=!0,r=c,i=0;i<t;i++)for(var a=0;a<n;a++)-1===h.fields[i][a].value||h.fields[i][a].isOpen||(e=!1),h.fields[i][a].isFlag&&r--;s(r),l(e)}())},z=function(e,r,i){e>=0&&r>=0&&e<t&&r<n&&!i[e][r].isFlag&&(i[e][r].isOpen=!0,i[e][r].isQuestionMark=!1,-1===i[e][r].value&&(o(!0),window.navigator.vibrate(100)),0===i[e][r].value&&(i=Q(i,e,r)))},E=function(e,r,i){var a=0;return e+1<t&&r+1<n&&i[e+1][r+1].isFlag&&a++,e+1<t&&i[e+1][r].isFlag&&a++,e+1<t&&r-1>=0&&i[e+1][r-1].isFlag&&a++,r+1<n&&i[e][r+1].isFlag&&a++,r-1>=0&&i[e][r-1].isFlag&&a++,e-1>=0&&r+1<n&&i[e-1][r+1].isFlag&&a++,e-1>=0&&i[e-1][r].isFlag&&a++,e-1>=0&&r-1>=0&&i[e-1][r-1].isFlag&&a++,i[e][r].value===a},Q=function(e,t,n){for(var r=[{x:t,y:n}];r.length>0;){for(var i=[],a=0;a<r.length;a++)I(r[a].x+1,r[a].y+1,i,e),I(r[a].x+1,r[a].y,i,e),I(r[a].x+1,r[a].y-1,i,e),I(r[a].x,r[a].y+1,i,e),I(r[a].x,r[a].y,i,e),I(r[a].x,r[a].y-1,i,e),I(r[a].x-1,r[a].y+1,i,e),I(r[a].x-1,r[a].y,i,e),I(r[a].x-1,r[a].y-1,i,e);r=i.slice()}return e},I=function(e,r,i,a){r>=0&&e>=0&&r<n&&e<t&&!a[e][r].isOpen&&(0===a[e][r].value&&i.push({x:e,y:r}),a[e][r].isOpen=!0,a[e][r].isFlag=!1,a[e][r].isQuestionMark=!1)},A=function(e,r){var i=h.fields,a=function(){for(var e=c,r=0;r<t;r++)for(var i=0;i<n;i++)h.fields[r][i].isFlag&&e--;return e}();window.navigator.vibrate(100),i[e][r].isOpen||(i[e][r].isFlag?(i[e][r].isQuestionMark=!0,i[e][r].isFlag=!1,a++):i[e][r].isQuestionMark?i[e][r].isQuestionMark=!1:0===a?i[e][r].isQuestionMark=!0:(i[e][r].isFlag=!0,a--),j({fields:i}),s(a))};return Object(i.jsx)(F,{children:Object(i.jsx)(k,{height:t,width:n,windowWidth:g,windowHeight:y,onContextMenu:function(e){return function(e){e.preventDefault()}(e)},children:h.fields.map((function(e,t){return Object(i.jsx)(i.Fragment,{children:e.map((function(e,n){return Object(i.jsx)(m,{value:e.value,x:t,y:n,isOpen:e.isOpen,isFlag:e.isFlag,isQuestionMark:e.isQuestionMark,isLose:u,click:W,marking:A,theme:f},"".concat(t,"_").concat(n))}))})}))})})},L=n(66),W=function(e){var t=e.isRefresh,n=e.isWin,c=e.setWinTime,s=e.isLose,o=Object(a.useState)(0),u=Object(r.a)(o,2),l=u[0],f=u[1],b=Object(a.useRef)(0),d=function(){clearInterval(b.current),f(0)};return Object(a.useEffect)((function(){return function(){return d()}}),[]),Object(a.useEffect)((function(){t?d():b.current=setInterval((function(){f((function(e){return e+1===999&&clearInterval(b.current),e+1}))}),1e3)}),[t]),Object(a.useEffect)((function(){n&&(clearInterval(b.current),f((function(e){return c(e),e}))),s&&clearInterval(b.current)}),[c,n,s]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(L.a,{style:{marginLeft:30}}),Object(i.jsx)("span",{style:{fontSize:20,margin:5},children:("000"+l).slice(-3)})]})},z=n(70);function E(){var e=Object(s.a)(["\n  padding-top: 20px;\n  width: 100%;\n  text-align: center;\n  font-size: 36px;\n\n  @media only screen and (max-width: 450px) {\n    text-align: left;\n    padding-left: 20px;\n  }\n"]);return E=function(){return e},e}function Q(){var e=Object(s.a)(["\n  margin: auto;\n  width: 100%;\n"]);return Q=function(){return e},e}var I=o.b.div(Q()),A=o.b.div(E()),C=n(32),D=n(56),T=n.n(D),_=n(57);function R(){var e=Object(s.a)(["\n  margin: 25px;\n  background: none;\n  font-size: 18px;\n  padding: 9px;\n  ","\n  border-radius: 6px;\n\n  :focus{\n    ","\n  }\n"]);return R=function(){return e},e}function B(){var e=Object(s.a)(["\n  font-size: 24px;\n  margin: 10px;\n  padding: 0;\n"]);return B=function(){return e},e}function H(){var e=Object(s.a)(["\n  font-size: 32px;\n  margin: 5px;\n  padding: 0;\n  font-weight: bold;\n"]);return H=function(){return e},e}function q(){var e=Object(s.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  margin-top: 10px;\n"]);return q=function(){return e},e}function N(){var e=Object(s.a)(["\n  font-size: 18px;\n  margin: 20px auto;\n  padding: 10px 20px;\n  border: none;\n  background-color: #2196F3;\n  color: white;\n\n  :hover{\n    cursor: pointer;\n    background-color: #1D85D4;\n  }\n"]);return N=function(){return e},e}var J=o.b.button(N()),P=o.b.form(q()),U=o.b.p(H()),X=o.b.p(B()),G=o.b.input(R(),(function(e){return e.error?"border: 2px solid red;":"border: 2px solid #82BDEB;"}),(function(e){return e.error?"box-shadow: 0 0 4px red;":"box-shadow: 0 0 4px rgba(81, 203, 238, 1);"})),K=n(58),V=function(e){var t=e.time,n=e.width,c=e.height,s=e.mines,o=e.level,u=e.closeModal,l=Object(a.useState)(""),f=Object(r.a)(l,2),b=f[0],d=f[1],h=Object(a.useState)(!1),j=Object(r.a)(h,2),p=j[0],v=j[1],g=function(){var e=Object(_.a)(T.a.mark((function e(r){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),b.length>0?(Object(K.b)({time:t,name:b,width:n,height:c,mines:s,level:o}),u()):v(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsxs)(P,{onSubmit:function(e){return g(e)},children:[Object(i.jsx)(U,{children:"CONGRATULATIONS"}),Object(i.jsxs)(X,{children:["you won, your time is ",t," seconds"]}),Object(i.jsx)(G,{type:"text",value:b,onChange:function(e){return function(e){d(e.target.value),v(""===e.target.value)}(e)},maxLength:22,onBlur:function(){v(""===b)},error:p}),Object(i.jsx)(J,{type:"submit",children:"save"})]})},Y=n(31);t.default=function(){var e=Object(c.c)((function(e){return e.gameParameters})),t=Object(c.c)((function(e){return e.gameTheme})),n=Object(a.useState)(e.width),s=Object(r.a)(n,2),o=s[0],l=s[1],f=Object(a.useState)(e.height),b=Object(r.a)(f,2),d=b[0],h=b[1],j=Object(a.useState)(e.mines),p=Object(r.a)(j,2),v=p[0],g=p[1],x=Object(a.useState)(!1),O=Object(r.a)(x,2),m=O[0],w=O[1],y=Object(a.useState)(!1),k=Object(r.a)(y,2),F=k[0],S=k[1],L=Object(a.useState)(0),E=Object(r.a)(L,2),Q=E[0],D=E[1],T=Object(a.useState)(!1),_=Object(r.a)(T,2),R=_[0],B=_[1],H=Object(a.useState)(e.mines),q=Object(r.a)(H,2),N=q[0],J=q[1],P=Object(a.useState)(!1),U=Object(r.a)(P,2),X=U[0],G=U[1],K=Object(a.useState)(t.theme),Z=Object(r.a)(K,2),$=Z[0],ee=Z[1];Object(a.useEffect)((function(){F&&setTimeout((function(){G(!0)}),500)}),[F]),Object(a.useEffect)((function(){l(e.width),h(e.height),g(e.mines),ee(t.theme),J(e.mines),ne()}),[e,t]);var te=function(){J(e.mines),ne()},ne=function(){w(!1),B(!0),S(!1),setTimeout((function(){B(!1)}),10)};return Object(i.jsxs)(I,{children:[Object(i.jsx)(Y.a,{invisible:!R}),Object(i.jsx)(C.a,{startOpen:X,close:function(){return G(!1)},children:Object(i.jsx)(V,{time:Q,width:o,height:d,mines:v,level:e.level,closeModal:function(){return G(!1)}})}),Object(i.jsxs)(A,{children:[Object(i.jsx)(u.a,{}),Object(i.jsx)("span",{style:{display:"inline-block",width:15,fontSize:20,marginRight:30},children:N}),m?Object(i.jsx)(z.a,{style:{cursor:"pointer"},onClick:te}):Object(i.jsx)(z.b,{style:{cursor:"pointer"},onClick:te}),Object(i.jsx)(W,{isRefresh:R,isWin:F,setWinTime:D,isLose:m})]}),R?null:Object(i.jsx)(M,{width:o,height:d,mines:v,setFlags:J,setIsLose:w,isLose:m,setIsWin:S,theme:$})]})}}}]);
//# sourceMappingURL=5.7ab5ef71.chunk.js.map