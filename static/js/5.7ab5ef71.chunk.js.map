{"version":3,"sources":["database/FirebaseHelper.tsx","minesweeper/board/boardGenerator.tsx","minesweeper/field/Marks.tsx","minesweeper/field/Field.css.tsx","minesweeper/field/Field.tsx","minesweeper/board/Board.css.tsx","minesweeper/board/Board.tsx","components/Timer.tsx","pages/Minesweeper.css.tsx","components/winModal/WinModal.css.tsx","components/winModal/WinModal.tsx","pages/Minesweeper.tsx"],"names":["initialDatabase","firebase","apps","length","initializeApp","apiKey","authDomain","projectId","databaseURL","storageBucket","writeData","data","database","ref","push","readData","a","Promise","resolve","reject","once","snapshot","Object","values","val","forEach","value","generateFields","width","height","mines","fields","global","i","j","isOpen","isFlag","isQuestionMark","position","generateMinePosition","x","y","countMines","isMines","randomMine","Math","floor","random","marks","theme","type","Themes","blue","style","color","fontWeight","green","pink","fontSize","FieldStyled","styled","div","props","css","colorTheme","Content","p","Field","isLose","click","marking","onClick","onContextMenu","isRender","prevProps","nextProps","memo","BoardStyled","windowHeight","windowWidth","Wrapper","Board","setFlags","setIsLose","setIsWin","useState","setFields","setWindowWidth","setWindowHeight","useEffect","setScreenSize","window","addEventListener","innerWidth","innerHeight","tab","slice","detectFlags","discoverFields","isWIn","flags","checkFalgsAndFinish","navigator","vibrate","findBlank","count","positions","blankNeighbors","adddBlankField","detectFlag","event","preventDefault","handleContextMenu","map","row","el","Timer","isRefresh","isWin","setWinTime","time","setTime","intervalID","useRef","stopInterval","clearInterval","current","setInterval","marginLeft","margin","Menu","SubmitButton","button","form","Header","Text","Input","input","error","WinModal","level","closeModal","name","setName","isError","setIsError","save","onSubmit","onChange","target","handleChange","maxLength","onBlur","Minesweeper","selectorParameters","useSelector","state","gameParameters","selectorThemes","gameTheme","setWidth","setHeight","setMines","winTime","setIsRefresh","isOpenModal","setIsOpenModal","setTheme","setTimeout","refresh","restart","Loading","invisible","Modal","startOpen","close","display","marginRight","cursor"],"mappings":"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","file":"static/js/5.7ab5ef71.chunk.js","sourcesContent":["import firebase from 'firebase'\n\nexport const initialDatabase = () => {\n  if (!firebase.apps.length) {\n    const firebaseConfig = {\n      apiKey: \"AIzaSyARXNmjw3dtkJ05clEifNoCVpXcWxmPL-Q\",\n      authDomain: \"minesweeper-d2be7.firebaseapp.com\",\n      projectId: \"minesweeper-d2be7\",\n      databaseURL: \"https://minesweeper-d2be7-default-rtdb.europe-west1.firebasedatabase.app/\",\n      storageBucket: \"minesweeper-d2be7.appspot.com\",\n    };\n    firebase.initializeApp(firebaseConfig)\n  }\n}\n\nexport const writeData = (data: any) => {\n  initialDatabase();\n  firebase.database().ref('winners').push(data);\n}\n\nexport const readData = async () => {\n  initialDatabase();\n  return new Promise(async (resolve, reject) => {\n    const data: any[] = [];\n    try {\n      const snapshot = await firebase.database().ref('winners').once('value');\n      Object.values(snapshot.val()).forEach((value) => {\n        data.push(value);\n      });\n      return resolve(data);\n    } catch {\n      return reject(null)\n    }\n  });\n}","import { Position } from './position'\n\ninterface FieldValue {\n  value: number;\n  isOpen: boolean;\n  isFlag: boolean;\n  isQuestionMark: boolean\n}\n\ndeclare global {\n  namespace NodeJS {\n    interface Global {\n      width: number;\n      height: number;\n    }\n  }\n}\n\nexport const generateFields = (width: number, height: number, mines: number): FieldValue[][] => {\n  let fields: FieldValue[][] = [];\n  global.width = width;\n  global.height = height;\n  for (let i = 0; i < height; i++) {\n    fields[i] = [];\n    for (let j = 0; j < width; j++) {\n      const field: FieldValue = { value: 0, isOpen: false, isFlag: false, isQuestionMark: false }\n      fields[i][j] = field;\n    }\n  }\n  for (let i = 0; i < mines; i++) {\n    let position: Position = generateMinePosition(fields);\n    fields[position.x][position.y].value = -1;\n  }\n  for (let i = 0; i < height; i++) {\n    for (let j = 0; j < width; j++) {\n      if (fields[i][j].value === 0) {\n        let countMines: number = 0;\n        isMines(fields, i - 1, j - 1) && countMines++;\n        isMines(fields, i - 1, j) && countMines++;\n        isMines(fields, i - 1, j + 1) && countMines++;\n        isMines(fields, i, j - 1) && countMines++;\n        isMines(fields, i, j + 1) && countMines++;\n        isMines(fields, i + 1, j - 1) && countMines++;\n        isMines(fields, i + 1, j) && countMines++;\n        isMines(fields, i + 1, j + 1) && countMines++;\n        fields[i][j].value = countMines;\n      }\n    }\n  }\n  return fields;\n};\n\nconst generateMinePosition = (fields: FieldValue[][]): Position => {\n  let position: Position = { x: -1, y: -1 };\n  for (let i = 0; i < 5; i++) {\n    position = randomMine();\n    if (fields[position.x][position.y].value !== -1) {\n      return { x: position.x, y: position.y }\n    }\n  }\n  for (let j = position.y; j < global.width; j++) {\n    if (fields[position.x][j].value !== -1) {\n      return { x: position.x, y: j }\n    }\n  }\n  for (let i = position.x + 1; i < global.height; i++) {\n    for (let j = 0; j < global.width; j++) {\n      if (fields[i][j].value !== -1) {\n        return { x: i, y: j }\n      }\n    }\n  }\n  for (let j = position.y; j <= 0; j--) {\n    if (fields[position.x][j].value !== -1) {\n      return { x: position.x, y: j }\n    }\n  }\n  for (let i = position.x + 1; i <= 0; i--) {\n    for (let j = position.y; j <= 0; j--) {\n      if (fields[i][j].value !== -1) {\n        return { x: i, y: j }\n      }\n    }\n  }\n  return position;\n}\n\nconst randomMine = (): Position => {\n  let x: number = Math.floor(Math.random() * (global.height))\n  let y: number = Math.floor(Math.random() * (global.width))\n  return { x, y }\n}\n\nconst isMines = (fields: FieldValue[][], x: number, y: number): boolean => {\n  if (x === -1 || x === global.height || y === -1 || y === global.width) {\n    return false;\n  }\n  if (fields[x][y].value === -1) {\n    return true;\n  }\n  return false;\n}","import React from 'react'\nimport { IoMdFlag, IoMdFlower } from 'react-icons/io'\nimport { GiRollingBomb, GiSpiralLollipop } from 'react-icons/gi'\nimport { BsFillQuestionDiamondFill } from 'react-icons/bs'\nimport { Themes } from '../../reducers/gameTheme/types'\n\nexport const color = (theme: Themes) => {\n  switch (theme) {\n    case Themes.blue:\n      return '#3e67ce'\n    case Themes.green:\n      return '#1C951C'\n    case Themes.pink:\n      return '#FF9999'\n  }\n}\n\nexport const marks = (theme: Themes, type: String) => {\n  switch (theme) {\n    case Themes.blue:\n      switch (type) {\n        case 'bomb':\n          return <GiRollingBomb style={{ color: \"#DAAE00\" }} />\n        case 'flag':\n          return <IoMdFlag style={{ color: \"#DAAE00\" }} />\n        case 'question':\n          return <BsFillQuestionDiamondFill style={{ color: \"#DAAE00\" }} />\n        case 'active_flag':\n          return <IoMdFlag style={{ color: \"#bb0000\" }} />\n        case 'active_bomb':\n          return <GiRollingBomb style={{ color: \"#bb0000\" }} />\n        default:\n          return <div style={{ color: \"green\", fontWeight: 'bold' }}>{type}</div>\n      }\n    case Themes.green:\n      switch (type) {\n        case 'bomb':\n          return <IoMdFlower style={{ color: \"#012601\" }} />\n        case 'flag':\n          return <IoMdFlag style={{ color: \"#012601\" }} />\n        case 'question':\n          return <BsFillQuestionDiamondFill style={{ color: \"#012601\" }} />\n        case 'active_flag':\n          return <IoMdFlag style={{ color: \"#bb0000\" }} />\n        case 'active_bomb':\n          return <IoMdFlower style={{ color: \"#bb0000\" }} />\n        default:\n          return <div style={{ color: \"#1DB6B6\", fontWeight: 'bold' }}>{type}</div>\n      }\n    case Themes.pink:\n      switch (type) {\n        case 'bomb':\n          return <GiSpiralLollipop style={{ color: \"#cc0066\", fontSize: 30 }} />\n        case 'flag':\n          return <IoMdFlag style={{ color: \"#cc0066\" }} />\n        case 'question':\n          return <BsFillQuestionDiamondFill style={{ color: \"#cc0066\" }} />\n        case 'active_flag':\n          return <IoMdFlag style={{ color: \"#bb0000\" }} />\n        case 'active_bomb':\n          return <GiSpiralLollipop style={{ color: \"#bb0000\", fontSize: 30 }} />\n        default:\n          return <div style={{ color: \"#3F0041\", fontWeight: 'bold' }}>{type}</div>\n      }\n  }\n}\n","import styled, {css} from 'styled-components'\n\nimport { Themes } from '../../reducers/gameTheme/types'\nimport {color} from './Marks'\n\ninterface props {\n  isOpen: boolean\n  colorTheme: Themes\n}\n\nexport const FieldStyled = styled.div<props>`\n  position: relative;\n  margin: 1px;\n  border-radius: 15%;\n  background-color: ${(props: props) => props.isOpen ? `gainsboro` : css`${color(props.colorTheme)}`};\n  -webkit-touch-callout: none;\n    -webkit-user-select: none;\n     -khtml-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n`\n\nexport const Content = styled.p`\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5em;\n`","import React, { FunctionComponent, memo } from 'react'\n\nimport { FieldStyled, Content } from './Field.css'\nimport { marks } from './Marks'\nimport { Themes } from '../../reducers/gameTheme/types';\n\ntype FieldProps = {\n  value: number;\n  x: number;\n  y: number;\n  isOpen: boolean;\n  isFlag: boolean;\n  isQuestionMark: boolean;\n  isLose: boolean;\n  click: (x: number, y: number) => void;\n  marking: (x: number, y: number) => void\n  theme: Themes\n}\n\nconst Field: FunctionComponent<FieldProps> = ({\n  value, x, y, isOpen, isFlag, isQuestionMark, isLose, click, marking, theme\n}) => {\n\n  const handleClick = () => {\n    if (!isLose) {\n      click(x, y);\n    }\n  }\n\n  const handleFlag = () => {\n    if (!isLose) {\n      marking(x, y);\n    }\n  }\n\n  return (\n    <FieldStyled\n      isOpen={isOpen}\n      onClick={handleClick}\n      onContextMenu={handleFlag}\n      colorTheme={theme}\n    >\n      <Content>\n        {isOpen && value !== 0 && !isFlag && value !== -1 && marks(theme, value + '')}\n        {isOpen && !isFlag && value === -1 && marks(theme, 'active_bomb')}\n        {isLose && !isOpen && !isFlag && value === -1 && marks(theme, 'bomb')}\n        {isFlag && !(isLose && value !== -1) && marks(theme, 'flag')}\n        {isLose && isFlag && value !== -1 && marks(theme, 'active_flag')}\n        {isQuestionMark && marks(theme, 'question')}\n      </Content>\n    </FieldStyled>\n  )\n};\n\nconst isRender = (prevProps: any, nextProps: any): any => {\n  if (prevProps.isOpen === nextProps.isOpen && prevProps.isFlag === nextProps.isFlag\n    && prevProps.isQuestionMark === nextProps.isQuestionMark && prevProps.isLose === nextProps.isLose\n    && prevProps.value === nextProps.value && prevProps.x === nextProps.x && prevProps.y === nextProps.y) {\n    return true\n  }\n  if (nextProps.isLose && nextProps.isFlag && nextProps.value !== -1) {\n    return false;\n  }\n  if (nextProps.isLose && nextProps.value !== -1) {\n    return true;\n  }\n\n  return false;\n}\n\nexport default memo(Field, isRender);","import styled from 'styled-components';\n\ninterface props {\n  height: number\n  width: number\n  windowWidth: number\n  windowHeight: number\n}\n\nexport const BoardStyled = styled.div<props>`\n  padding: 0;\n  display: grid;\n  ${(props: props) => props.windowHeight * (85 / props.height) / 100 * props.width < props.windowWidth ?\n    `grid-template-rows: repeat(${props.height}, ${props.windowHeight * (85 / props.height) / 100 < 30 ? `30px` : `1fr`});\n    grid-template-columns: repeat(${props.width}, ${props.windowHeight * (85 / props.height) / 100 < 30 ? `30px` : `${85 / props.height}vh`});\n    ` :\n    `grid-template-columns: repeat(${props.width}, ${props.windowWidth * (95 / props.width) / 100 < 30 ? `30px` : `1fr`});\n    grid-template-rows: repeat(${props.height}, ${props.windowWidth * (95 / props.width) / 100 < 30 ? `30px` : `${95 / props.width}vw`});\n    width: 100%;`\n  }\n  height: 100%;\n  grid-gap: 0px;\n  letter-spacing: 0px;\n  word-spacing: 0px;\n`\n\nexport const Wrapper = styled.div`\n  height: 85vh;\n  width: 95vw;\n  display: flex;\n  margin: 25px auto;\n  justify-content: center;\n  align-items: center;\n  overflow-y: auto;\n  overflow-x: auto;\n  ::-webkit-scrollbar { \n    display: none;\n  }\n`","import React, { FunctionComponent, useState, useEffect } from 'react'\n\nimport Field from './../field/Field'\nimport { BoardStyled, Wrapper } from './Board.css'\nimport { generateFields } from './boardGenerator'\nimport { Position } from './position'\nimport { Themes } from './../../reducers/gameTheme/types'\n\ntype BoardProps = {\n  width: number;\n  height: number;\n  mines: number;\n  setFlags: (flags: number) => void;\n  setIsLose: (isLose: boolean) => void;\n  isLose: boolean;\n  setIsWin: (isWin: boolean) => void;\n  theme: Themes;\n}\n\ntype Fields = {\n  fields: FieldValue[][];\n}\n\ninterface FieldValue {\n  value: number;\n  isOpen: boolean;\n  isFlag: boolean;\n  isQuestionMark: boolean;\n}\n\nconst Board: FunctionComponent<BoardProps> = ({\n  height, width, mines, setFlags, setIsLose, isLose, setIsWin, theme\n}) => {\n  const [fields, setFields] = useState<Fields>({ fields: [] })\n  const [windowWidth, setWindowWidth] = useState(0)\n  const [windowHeight, setWindowHeight] = useState(0)\n\n  useEffect(() => {\n    setFields({ fields: generateFields(width, height, mines) })\n    setScreenSize();\n    window.addEventListener('resize', setScreenSize);\n  }, [width, height, mines]);\n\n  const setScreenSize = () => {\n    setWindowWidth(window.innerWidth);\n    setWindowHeight(window.innerHeight);\n  }\n\n  const checkFalgsAndFinish = () => {\n    let isWIn = true;\n    let flags = mines;\n    for (let i = 0; i < height; i++) {\n      for (let j = 0; j < width; j++) {\n        if (fields.fields[i][j].value !== -1 && !fields.fields[i][j].isOpen) {\n          isWIn = false;\n        }\n        if (fields.fields[i][j].isFlag) {\n          flags--;\n        }\n      }\n    }\n    setFlags(flags)\n    setIsWin(isWIn)\n  }\n\n  const click = (x: number, y: number) => {\n    let tab = fields.fields.slice();\n    if (!tab[x][y].isFlag) {\n      if (!tab[x][y].isOpen) {\n        discoverFields(x, y, tab)\n      }\n      else {\n        if (detectFlags(x, y, tab)) {\n          discoverFields(x - 1, y + 1, tab)\n          discoverFields(x - 1, y, tab)\n          discoverFields(x - 1, y - 1, tab)\n          discoverFields(x, y + 1, tab)\n          discoverFields(x, y - 1, tab)\n          discoverFields(x + 1, y + 1, tab)\n          discoverFields(x + 1, y, tab)\n          discoverFields(x + 1, y - 1, tab)\n        }\n      }\n      setFields({ fields: tab })\n      checkFalgsAndFinish();\n    }\n  }\n\n  const discoverFields = (x: number, y: number, tab: FieldValue[][]) => {\n    if (x >= 0 && y >= 0 && x < height && y < width && !tab[x][y].isFlag) {\n      tab[x][y].isOpen = true;\n      tab[x][y].isQuestionMark = false;\n      if (tab[x][y].value === -1) {\n        setIsLose(true)\n        window.navigator.vibrate(100);\n      }\n      if (tab[x][y].value === 0) {\n        tab = findBlank(tab, x, y);\n      }\n    }\n  }\n\n  const detectFlags = (x: number, y: number, tab: FieldValue[][]): boolean => {\n    let count: number = 0;\n    x + 1 < height && y + 1 < width && tab[x + 1][y + 1].isFlag && count++;\n    x + 1 < height && tab[x + 1][y].isFlag && count++;\n    x + 1 < height && y - 1 >= 0 && tab[x + 1][y - 1].isFlag && count++;\n    y + 1 < width && tab[x][y + 1].isFlag && count++;\n    y - 1 >= 0 && tab[x][y - 1].isFlag && count++;\n    x - 1 >= 0 && y + 1 < width && tab[x - 1][y + 1].isFlag && count++;\n    x - 1 >= 0 && tab[x - 1][y].isFlag && count++;\n    x - 1 >= 0 && y - 1 >= 0 && tab[x - 1][y - 1].isFlag && count++;\n\n    return tab[x][y].value === count;\n  }\n\n  const findBlank = (tab: FieldValue[][], x: number, y: number): FieldValue[][] => {\n    let positions: Position[] = [{ x, y }];\n    while (positions.length > 0) {\n      const blankNeighbors: Position[] = [];\n      for (let i = 0; i < positions.length; i++) {\n        adddBlankField(positions[i].x + 1, positions[i].y + 1, blankNeighbors, tab)\n        adddBlankField(positions[i].x + 1, positions[i].y, blankNeighbors, tab)\n        adddBlankField(positions[i].x + 1, positions[i].y - 1, blankNeighbors, tab)\n        adddBlankField(positions[i].x, positions[i].y + 1, blankNeighbors, tab)\n        adddBlankField(positions[i].x, positions[i].y, blankNeighbors, tab)\n        adddBlankField(positions[i].x, positions[i].y - 1, blankNeighbors, tab)\n        adddBlankField(positions[i].x - 1, positions[i].y + 1, blankNeighbors, tab)\n        adddBlankField(positions[i].x - 1, positions[i].y, blankNeighbors, tab)\n        adddBlankField(positions[i].x - 1, positions[i].y - 1, blankNeighbors, tab)\n      }\n      positions = blankNeighbors.slice();\n    }\n    return tab;\n  }\n\n  const adddBlankField = (x: number, y: number, blankNeighbors: Position[], tab: FieldValue[][]) => {\n    if (y >= 0 && x >= 0 && y < width && x < height && !tab[x][y].isOpen) {\n      if (tab[x][y].value === 0) {\n        blankNeighbors.push({ x, y })\n      }\n      tab[x][y].isOpen = true;\n      tab[x][y].isFlag = false;\n      tab[x][y].isQuestionMark = false;\n    }\n  }\n\n  const detectFlag = (): number => {\n    let flags = mines;\n    for (let i = 0; i < height; i++) {\n      for (let j = 0; j < width; j++) {\n        if (fields.fields[i][j].isFlag) {\n          flags--;\n        }\n      }\n    }\n    return flags;\n  }\n\n  const marking = (x: number, y: number) => {\n    const tab = fields.fields;\n    let flags = detectFlag();\n    window.navigator.vibrate(100);\n    if (!tab[x][y].isOpen) {\n      if (tab[x][y].isFlag) {\n        tab[x][y].isQuestionMark = true;\n        tab[x][y].isFlag = false;\n        flags++;\n      } else if (tab[x][y].isQuestionMark) {\n        tab[x][y].isQuestionMark = false;\n      } else if (flags === 0) {\n        tab[x][y].isQuestionMark = true;\n      } else {\n        tab[x][y].isFlag = true;\n        flags--;\n      }\n      setFields({ fields: tab })\n      setFlags(flags)\n    }\n  }\n\n  const handleContextMenu = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n  }\n\n  return (\n    <Wrapper>\n      <BoardStyled\n        height={height}\n        width={width}\n        windowWidth={windowWidth}\n        windowHeight={windowHeight}\n        onContextMenu={(event: React.MouseEvent<HTMLElement>) => handleContextMenu(event)}\n      >\n        {fields.fields.map((row, x) => (\n          <>\n            {row.map((el, y) => (\n              <Field\n                key={`${x}_${y}`}\n                value={el.value}\n                x={x}\n                y={y}\n                isOpen={el.isOpen}\n                isFlag={el.isFlag}\n                isQuestionMark={el.isQuestionMark}\n                isLose={isLose}\n                click={click}\n                marking={marking}\n                theme={theme}\n              />\n            ))}\n          </>\n        ))}\n      </BoardStyled>\n    </Wrapper>\n  )\n}\n\nexport default Board;","import React, { useState, useEffect, FunctionComponent, useRef } from 'react'\nimport { FiClock } from 'react-icons/fi'\n\ntype TimerProps = {\n  isRefresh: boolean\n  isWin: boolean\n  setWinTime: (tine: number) => void\n  isLose: boolean\n}\n\nconst Timer: FunctionComponent<TimerProps> = ({ isRefresh, isWin, setWinTime, isLose }) => {\n  let [time, setTime] = useState(0);\n\n  let intervalID = useRef(0);\n\n  const startInterval = () => {\n    intervalID.current = setInterval(() => {\n      setTime(time => {\n        if (time + 1 === 999) {\n          clearInterval(intervalID.current)\n        }\n        return time + 1\n      })\n    }, 1000);\n  }\n\n  const stopInterval = () => {\n    clearInterval(intervalID.current);\n    setTime(0)\n  }\n\n  useEffect(() => {\n    return () => stopInterval();\n  }, []);\n\n  useEffect(() => {\n    if (isRefresh) {\n      stopInterval();\n    } else {\n      startInterval()\n    }\n  }, [isRefresh]);\n\n  useEffect(() => {\n    if (isWin) {\n      clearInterval(intervalID.current);\n      setTime(time => {\n        setWinTime(time)\n        return time\n      })\n    }\n    if (isLose) {\n      clearInterval(intervalID.current);\n    }\n  }, [setWinTime, isWin, isLose]);\n\n  return (\n    <>\n      <FiClock style={{ marginLeft: 30 }} />\n      <span style={{ fontSize: 20, margin: 5 }}>\n        {(\"000\" + time).slice(-3)}\n      </span>\n    </>\n  )\n}\n\nexport default Timer;","import styled from 'styled-components';\n\nexport const Wrapper = styled.div`\n  margin: auto;\n  width: 100%;\n`\n\nexport const Menu = styled.div`\n  padding-top: 20px;\n  width: 100%;\n  text-align: center;\n  font-size: 36px;\n\n  @media only screen and (max-width: 450px) {\n    text-align: left;\n    padding-left: 20px;\n  }\n`","import styled from 'styled-components';\n\nexport const SubmitButton = styled.button`\n  font-size: 18px;\n  margin: 20px auto;\n  padding: 10px 20px;\n  border: none;\n  background-color: #2196F3;\n  color: white;\n\n  :hover{\n    cursor: pointer;\n    background-color: #1D85D4;\n  }\n`\n\nexport const Wrapper = styled.form`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  margin-top: 10px;\n`\n\nexport const Header = styled.p`\n  font-size: 32px;\n  margin: 5px;\n  padding: 0;\n  font-weight: bold;\n`\n\nexport const Text = styled.p`\n  font-size: 24px;\n  margin: 10px;\n  padding: 0;\n`\n\ninterface InputProps {\n  error: boolean,\n}\n\nexport const Input = styled.input`\n  margin: 25px;\n  background: none;\n  font-size: 18px;\n  padding: 9px;\n  ${(props: InputProps) => props.error ?\n    `border: 2px solid red;` :\n    `border: 2px solid #82BDEB;`\n  }\n  border-radius: 6px;\n\n  :focus{\n    ${(props: InputProps) => props.error ?\n    `box-shadow: 0 0 4px red;` :\n    `box-shadow: 0 0 4px rgba(81, 203, 238, 1);`\n    }\n  }\n`","import React, { FunctionComponent, useState } from 'react'\n\nimport { SubmitButton, Wrapper, Text, Header, Input } from './WinModal.css'\nimport { writeData } from './../../database/FirebaseHelper'\n\ninterface PropsWinModal {\n  time: number\n  width: number\n  height: number\n  mines: number\n  level: number\n  closeModal: () => void\n}\n\nconst WinModal: FunctionComponent<PropsWinModal> = ({ time, width, height, mines, level, closeModal }) => {\n  const [name, setName] = useState('')\n  const [isError, setIsError] = useState(false)\n\n  const save = async (event: React.FormEvent) => {\n    event.preventDefault();\n    if (name.length > 0) {\n      writeData({\n        time,\n        name,\n        width,\n        height,\n        mines,\n        level\n      })\n      closeModal();\n    } else {\n      setIsError(true)\n    }\n  }\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setName(event.target.value);\n    setIsError(event.target.value === '');\n  }\n\n  const handleBlur = () => {\n    setIsError(name === '');\n  }\n\n  return (\n    <Wrapper onSubmit={(event: React.FormEvent) => save(event)}>\n      <Header>CONGRATULATIONS</Header>\n      <Text>you won, your time is {time} seconds</Text>\n      <Input\n        type='text'\n        value={name}\n        onChange={(event: React.ChangeEvent<HTMLInputElement>) => handleChange(event)}\n        maxLength={22}\n        onBlur={handleBlur}\n        error={isError}\n      />\n      <SubmitButton type='submit'>save</SubmitButton>\n    </Wrapper>\n  )\n}\n\nexport default WinModal;","import React, { useState, useEffect } from 'react'\nimport { useSelector } from 'react-redux'\n\nimport Board from '../minesweeper/board/Board'\nimport Timer from './../components/Timer'\nimport { IoMdFlag } from 'react-icons/io'\nimport { BiSmile, BiSad } from 'react-icons/bi'\nimport { Wrapper, Menu } from './Minesweeper.css'\nimport Modal from './../components/modal/Modal'\nimport { RootState } from './../reducers/index'\nimport WinModal from './../components/winModal/WinModal'\nimport Loading from './../components/Loading'\n\nconst Minesweeper = () => {\n  const selectorParameters = useSelector((state: RootState) => state.gameParameters)\n  const selectorThemes = useSelector((state: RootState) => state.gameTheme)\n\n  const [width, setWidth] = useState(selectorParameters.width)\n  const [height, setHeight] = useState(selectorParameters.height)\n  const [mines, setMines] = useState(selectorParameters.mines)\n  const [isLose, setIsLose] = useState(false)\n  const [isWin, setIsWin] = useState(false)\n  const [winTime, setWinTime] = useState(0)\n  const [isRefresh, setIsRefresh] = useState(false)\n  const [flags, setFlags] = useState(selectorParameters.mines)\n  const [isOpenModal, setIsOpenModal] = useState(false)\n  const [theme, setTheme] = useState(selectorThemes.theme)\n\n  useEffect(() => {\n    if (isWin) {\n      setTimeout(() => {\n        setIsOpenModal(true)\n      }, 500);\n    }\n  }, [isWin]);\n\n  useEffect(() => {\n    setWidth(selectorParameters.width)\n    setHeight(selectorParameters.height)\n    setMines(selectorParameters.mines)\n    setTheme(selectorThemes.theme)\n    setFlags(selectorParameters.mines)\n    refresh();\n  }, [selectorParameters, selectorThemes]);\n\n  const restart = () => {\n    setFlags(selectorParameters.mines)\n    refresh()\n  }\n\n  const refresh = () => {\n    setIsLose(false)\n    setIsRefresh(true)\n    setIsWin(false)\n\n    setTimeout(() => {\n      setIsRefresh(false)\n    }, 10);\n  }\n\n  return (\n    <Wrapper>\n      <Loading\n        invisible={!isRefresh}\n      />\n      <Modal startOpen={isOpenModal} close={() => setIsOpenModal(false)}>\n        <WinModal\n          time={winTime}\n          width={width}\n          height={height}\n          mines={mines}\n          level={selectorParameters.level}\n          closeModal={() => setIsOpenModal(false)}\n        />\n      </Modal>\n      <Menu>\n        <IoMdFlag />\n        <span style={{ display: 'inline-block', width: 15, fontSize: 20, marginRight: 30 }}>\n          {flags}\n        </span>\n        {\n          isLose ?\n            (<BiSad style={{ cursor: 'pointer' }} onClick={restart} />) :\n            (<BiSmile style={{ cursor: 'pointer' }} onClick={restart} />)\n        }\n        <Timer\n          isRefresh={isRefresh}\n          isWin={isWin}\n          setWinTime={setWinTime}\n          isLose={isLose}\n        />\n      </Menu>\n      {\n        !isRefresh ?\n          <Board\n            width={width}\n            height={height}\n            mines={mines}\n            setFlags={setFlags}\n            setIsLose={setIsLose}\n            isLose={isLose}\n            setIsWin={setIsWin}\n            theme={theme}\n          /> : null\n      }\n    </Wrapper>\n  )\n}\n\nexport default Minesweeper;"],"sourceRoot":""}